add_executable(Lab2CPP lab2.cpp)
target_include_directories(Lab2CPP PUBLIC ../LibraryCPP)
target_link_libraries(Lab2CPP LibraryCPP)

add_test(NAME TestLab2CPP COMMAND Lab2CPP ${CMAKE_CURRENT_SOURCE_DIR}/input.txt)
set_property(TEST TestLab2CPP PROPERTY PASS_REGULAR_EXPRESSION "PUSH 1.*PUSH 2.*PUSH 3.*POP A.*POP B.*MUL A, B.*PUSH A.*POP A.*POP B.*ADD A, B.*PUSH A")

add_test(NAME TestLab2CPP1 COMMAND Lab2CPP ${CMAKE_CURRENT_SOURCE_DIR}/input1.txt)
set_property(TEST TestLab2CPP1 PROPERTY PASS_REGULAR_EXPRESSION "PUSH 1.*PUSH 2.*POP A.*POP B.*ADD A, B.*PUSH A.*PUSH 3.*POP A.*POP B.*MUL A, B.*PUSH A")

add_test(NAME TestLab2CPP2 COMMAND Lab2CPP ${CMAKE_CURRENT_SOURCE_DIR}/input2.txt)
set_property(TEST TestLab2CPP2 PROPERTY PASS_REGULAR_EXPRESSION "PUSH 1.*PUSH 2.*POP A.*POP B.*ADD A, B.*PUSH A.*PUSH 3.*PUSH 4.*POP A.*POP B.*ADD A, B.*PUSH A.*POP A.*POP B.*MUL A, B.*PUSH A")

add_test(NAME TestLab2CPP3 COMMAND Lab2CPP ${CMAKE_CURRENT_SOURCE_DIR}/input3.txt)
set_property(TEST TestLab2CPP3 PROPERTY PASS_REGULAR_EXPRESSION "PUSH 1.*PUSH 2.*POP A.*POP B.*ADD A, B.*PUSH A.*PUSH 3.*POP A.*POP B.*MUL A, B.*PUSH A.*PUSH 4.*POP A.*POP B.*SUB A, B.*PUSH A")